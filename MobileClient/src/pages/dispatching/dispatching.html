<!-- Copyright (c) Microsoft Corporation. All rights reserved.
     Licensed under the MIT License. -->

     <ion-header>
      <ion-navbar>
        <ion-title>Dispatching</ion-title>
      </ion-navbar>
    </ion-header>
    
    
    <ion-content padding>
    
      <div>
    
        <ion-item *ngIf="noDispatches" type="text"> No dispaches yet </ion-item>
        <ion-row center>
          <ion-col text-center>
            <button ion-button *ngIf="noDispatches == false" inline-block (click)="TurnDispatchingOff()">Turn Dispatching Off</button>
          </ion-col>
        </ion-row>
        <ion-list>
    
          <ion-item *ngFor="let dispatch of dispatches; let i= index">
            <ion-card>
              <ion-card-content>
                <ion-card-title style="white-space: normal;">
                  {{briefDestinations[i]}}
                </ion-card-title>
    
                <ion-item text-wrap *ngIf="dispatch.dateTime != null">
    
                  <ion-icon name="clock" item-start style="color: #1a75ff"></ion-icon>
                  {{dispatch.dateTime}}
                </ion-item>
    
                <ion-item text-wrap *ngIf="dispatch.dateTime == null">
    
                  <ion-icon name="clock" item-start style="color: #1a75ff"></ion-icon>
                  Now
                </ion-item>
    
                <ion-item text-wrap>
                  <ion-icon name="locate" item-start style="color: #1a75ff"></ion-icon>
                  {{finalDestinations[i]}}
                  <br> {{dispatch.wayPoints[dispatch.wayPoints.length-1].latitude | number }} , {{dispatch.wayPoints[dispatch.wayPoints.length-1].longitude
                  | number}}
                </ion-item>
    
                <ion-row center>
                  <ion-col text-center>
                    <button ion-button inline-block (click)="Navigate(dispatch)">Start Navigation</button>
                  </ion-col>
                </ion-row>
              </ion-card-content>
    
            </ion-card>
    
          </ion-item>
    
        </ion-list>
    
      </div>
    
    </ion-content>